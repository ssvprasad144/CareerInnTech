{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}CareerInnTech{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- GLOBAL CSS -->
    <link rel="stylesheet" href="{% static 'css/base.css' %}">

    {% block extra_css %}{% endblock %}
</head>

<body>

<!-- ================= ALERT MESSAGES ================= -->
{% if messages %}
<div class="alert-container">
    {% for message in messages %}
        <div class="alert {{ message.tags }}">
            {{ message }}
        </div>
    {% endfor %}
</div>
{% endif %}

<!-- ================= HEADER ================= -->
<header class="main-header">
    <div class="header-left">
        <img id="logomain" src="{% static 'images/logomain.png' %}" alt="CareerInnTech Logo">

        <div class="logo">
            CareerInnTech
            <span>BTech â€¢ Hospitality â€¢ Careers</span>
        </div>
    </div>

    <nav class="header-nav compact">
        <a href="{% url 'dashboard' %}" class="nav-btn">Home</a>
        <a href="{% url 'about' %}" class="nav-btn">About</a>
        <a href="{% url 'contact' %}" class="nav-btn">Contact</a>
        <a href="{% url 'support' %}" class="nav-btn">Support</a>
    </nav>

    <div class="header-right">

        {% if user.is_authenticated %}
            <a href="{% url 'profile_page' %}" class="profile-circle">
                {{ user.username|first|upper }}
            </a>


            {% if not user.studentprofile.is_profile_complete %}
                <a href="{% url 'welcome' %}" class="primary-btn pulse-btn">
                    Complete Profile
                </a>
            {% else %}
                <a href="{% url 'edit_profile' %}" class="secondary-btn">
                    Edit Profile
                </a>
            {% endif %}

            <a href="{% url 'logout' %}" class="logout-btn">Logout</a>

        {% else %}
            <a href="{% url 'login' %}" class="login-btn">Login</a>
            <a href="{% url 'signup' %}" class="primary-btn">Sign Up</a>
        {% endif %}
    </div>
</header>



<!-- ================= MAIN CONTENT ================= -->
<main class="main-content">
    {% block content %}{% endblock %}
</main>



<!-- ================= AI CHATBOT ================= -->
<div id="aiChatbot">

    <!-- Floating Toggle -->
    <div id="chatbotToggle" onclick="startBotWalk()">ðŸ¤–</div>

    <!-- AI Assistant Panel -->
    <div id="chatbotWindow">
        <div class="chatbot-header">
            <span>CareerInnTech AI</span>
            <button onclick="toggleChatbot()">âœ•</button>
        </div>

        <div class="chatbot-body">

            <div id="chatMessages" style="max-height:300px; overflow-y:auto;"></div>

            <div style="display:flex; gap:8px; margin-top:12px;">
                <input
                    id="chatInput"
                    type="text"
                    placeholder="Ask your question..."
                    style="flex:1; padding:10px; border-radius:10px; border:none;"
                    onkeydown="if(event.key==='Enter') sendMessage()"
                />
                <button
                    onclick="sendMessage()"
                    style="padding:10px 14px; border-radius:10px; background:#6366f1; color:#fff; border:none;">
                    Send
                </button>
            </div>

            <ul class="ai-points" style="margin-top:12px;">
                <li>âœ” Skills & roadmaps</li>
                <li>âœ” Colleges & cutoffs</li>
                <li>âœ” Jobs, exams & planning</li>
            </ul>

            <button class="ai-start-btn" onclick="startAIChat()">
                Start AI Chat
            </button>

        </div>
    </div>
</div>

<script src="{% static 'js/base.js' %}"></script>
<script src="{% static 'js/bot-walk.js' %}"></script>

<script>
function toggleChatbot() {
    document.getElementById("chatbotWindow").classList.toggle("open");
}

window.addEventListener("pageshow", function (event) {
    if (event.persisted) {
        window.location.reload();
    }
});
</script>


</body>
</html>
