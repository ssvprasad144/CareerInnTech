{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>All Courses</title>
  <link rel="stylesheet" href="{% static 'css/btech_skills.css' %}">
</head>

<body>

<div class="skills-container">

  <div class="branch-header">
    <h2 id="branchTitle">Courses</h2>
    <a href="{% url 'btech_skills' %}" class="view-all">‚Üê Back</a>
  </div>

  <div class="course-grid" id="courseGrid"></div>

</div>

<script>
  const params = new URLSearchParams(window.location.search);
  const branch = params.get("branch");

  // üö´ Do not guess branch
  if (!branch) {
    document.getElementById("branchTitle").innerText = "Courses";
    throw new Error("Branch not provided in URL");
  }

  const data = {
    cse: [
      { name: "Python", img: "python.png" },
      { name: "Java", img: "java.png" },
      { name: "DSA", img: "dsa.png" },
      { name: "SQL", img: "sql.png" },
      { name: "Computer Networks", img: "networks.png" },
      { name: "Operating Systems", img: "networks.png" }
    ],
    ece: [
      { name: "Signals", img: "signals.png" },
      { name: "VLSI", img: "vlsi.png" },
      { name: "Embedded", img: "embedded.png" },
      { name: "Networks", img: "networks.png" }
    ],
    eee: [
      { name: "Machines", img: "embedded.png" },
      { name: "Power Systems", img: "networks.png" },
      { name: "Power Electronics", img: "vlsi.png" },
      { name: "Measurements", img: "signals.png" }
    ]
  };

  document.getElementById("branchTitle").innerText =
    branch.toUpperCase() + " Courses";

  const grid = document.getElementById("courseGrid");

  data[branch].forEach(course => {
    grid.innerHTML += `
      <a href="{% url 'course_detail' %}?course=${encodeURIComponent(course.name)}&branch=${branch}&source=view_all"
         class="course-card">
        <img src="{% static 'images/skills/' %}${course.img}">
        <p>${course.name}</p>
      </a>
    `;
  });
</script>

</body>
</html>
